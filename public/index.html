<html lang="en">
  <head>
    <title>CS4241 Final Project</title>
    <meta charset="utf-8">
     <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="css/style.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">
    <script src="js/scripts.js"></script>
  </head>
  <body>
    <div class = "container">
      <div id="left"></div>
      <div id="right"></div>
      <div id="top"></div>
      <div id="bottom"></div>

      <div class ="spot">
        <br>
        <img class = "spot" src="../images/spot.png">
      </div>
      <div class ="username">
        <form class="form-inline">
          <label class="sr-only" for="inlineFormInput">Name</label>
          <input type="text" class="form-control mb-2 mr-sm-2 mb-sm-0" id="inlineFormInput" placeholder="Enter a username...">
        </form>
        <br>
        <button onclick="initUsername()" type="button" class="btn btn-info" style= "width: 150px; height: 50px; color: white; font-size:26; background-color: green; border-color: white;">Join</button>
      </div>

    </div>
  
  <script>
// HF

window.onload = function(event) {
	newXHRRequest('POST', '/initUsername', initUsernameSender, function(req){
	    if (req.responseText === 'on') {
	    	window.location.href = 'lobby.html'
	    }
	})
  	return null
}

// definition
function initUsername () {
	newXHRRequest('POST', '/initUsername', initUsernameSender, initUsernameHandler)
}

// send username
function initUsernameSender (req) {
	var username = document.getElementById('inlineFormInput').value
    //req.send('name=' + username)
    req.send(username)
}

// see if username is already occupied
function initUsernameHandler (req) {
	//var T = JSON.parse(req.responseText);
	var rt = req.responseText
    if (rt === 'good') {
    	window.location.href = 'lobby.html'
    } else {
    	// username already used
    	console.log('playername already used')
    }
}
  </script>

  </body>
</html>
